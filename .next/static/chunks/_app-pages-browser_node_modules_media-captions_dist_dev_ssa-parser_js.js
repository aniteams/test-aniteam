"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["_app-pages-browser_node_modules_media-captions_dist_dev_ssa-parser_js"],{

/***/ "(app-pages-browser)/./node_modules/media-captions/dist/dev/ssa-parser.js":
/*!************************************************************!*\
  !*** ./node_modules/media-captions/dist/dev/ssa-parser.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SSAParser: () => (/* binding */ SSAParser),\n/* harmony export */   \"default\": () => (/* binding */ createSSAParser)\n/* harmony export */ });\n/* harmony import */ var _index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index.js */ \"(app-pages-browser)/./node_modules/media-captions/dist/dev/index.js\");\n\n\nconst FORMAT_START_RE = /^Format:[\\s\\t]*/, STYLE_START_RE = /^Style:[\\s\\t]*/, DIALOGUE_START_RE = /^Dialogue:[\\s\\t]*/, FORMAT_SPLIT_RE = /[\\s\\t]*,[\\s\\t]*/, STYLE_FUNCTION_RE = /\\{[^}]+\\}/g, NEW_LINE_RE = /\\\\N/g, STYLES_SECTION_START_RE = /^\\[(.*)[\\s\\t]?Styles\\]$/, EVENTS_SECTION_START_RE = /^\\[(.*)[\\s\\t]?Events\\]$/;\nclass SSAParser {\n  _init;\n  _section = 0 /* None */;\n  _cue = null;\n  _cues = [];\n  _errors = [];\n  _format = null;\n  _errorBuilder;\n  _styles = {};\n  async init(init) {\n    this._init = init;\n    if (init.errors)\n      this._errorBuilder = (await __webpack_require__.e(/*! import() */ \"_app-pages-browser_node_modules_media-captions_dist_dev_errors_js\").then(__webpack_require__.bind(__webpack_require__, /*! ./errors.js */ \"(app-pages-browser)/./node_modules/media-captions/dist/dev/errors.js\"))).ParseErrorBuilder;\n  }\n  parse(line, lineCount) {\n    if (this._section) {\n      switch (this._section) {\n        case 1 /* Style */:\n          if (line === \"\") {\n            this._section = 0 /* None */;\n          } else if (STYLE_START_RE.test(line)) {\n            if (this._format) {\n              const styles = line.replace(STYLE_START_RE, \"\").split(FORMAT_SPLIT_RE);\n              this._parseStyles(styles);\n            } else {\n              this._handleError(this._errorBuilder?._missingFormat(\"Style\", lineCount));\n            }\n          } else if (FORMAT_START_RE.test(line)) {\n            this._format = line.replace(FORMAT_START_RE, \"\").split(FORMAT_SPLIT_RE);\n          } else if (EVENTS_SECTION_START_RE.test(line)) {\n            this._format = null;\n            this._section = 2 /* Event */;\n          }\n          break;\n        case 2 /* Event */:\n          if (line === \"\") {\n            this._commitCue();\n          } else if (DIALOGUE_START_RE.test(line)) {\n            this._commitCue();\n            if (this._format) {\n              const dialogue = line.replace(DIALOGUE_START_RE, \"\").split(FORMAT_SPLIT_RE), cue = this._parseDialogue(dialogue, lineCount);\n              if (cue)\n                this._cue = cue;\n            } else {\n              this._handleError(this._errorBuilder?._missingFormat(\"Dialogue\", lineCount));\n            }\n          } else if (this._cue) {\n            this._cue.text += \"\\n\" + line.replace(STYLE_FUNCTION_RE, \"\").replace(NEW_LINE_RE, \"\\n\");\n          } else if (FORMAT_START_RE.test(line)) {\n            this._format = line.replace(FORMAT_START_RE, \"\").split(FORMAT_SPLIT_RE);\n          } else if (STYLES_SECTION_START_RE.test(line)) {\n            this._format = null;\n            this._section = 1 /* Style */;\n          } else if (EVENTS_SECTION_START_RE.test(line)) {\n            this._format = null;\n          }\n      }\n    } else if (line === \"\") ; else if (STYLES_SECTION_START_RE.test(line)) {\n      this._format = null;\n      this._section = 1 /* Style */;\n    } else if (EVENTS_SECTION_START_RE.test(line)) {\n      this._format = null;\n      this._section = 2 /* Event */;\n    }\n  }\n  done() {\n    return {\n      metadata: {},\n      cues: this._cues,\n      regions: [],\n      errors: this._errors\n    };\n  }\n  _commitCue() {\n    if (!this._cue)\n      return;\n    this._cues.push(this._cue);\n    this._init.onCue?.(this._cue);\n    this._cue = null;\n  }\n  _parseStyles(values) {\n    let name = \"Default\", styles = {}, outlineX, align = \"center\", vertical = \"bottom\", marginV, outlineY = 1.2, outlineColor, bgColor, borderStyle = 3, transform = [];\n    for (let i = 0; i < this._format.length; i++) {\n      const field = this._format[i], value = values[i];\n      switch (field) {\n        case \"Name\":\n          name = value;\n          break;\n        case \"Fontname\":\n          styles[\"font-family\"] = value;\n          break;\n        case \"Fontsize\":\n          styles[\"font-size\"] = `calc(${value} / var(--overlay-height))`;\n          break;\n        case \"PrimaryColour\":\n          const color = parseColor(value);\n          if (color)\n            styles[\"--cue-color\"] = color;\n          break;\n        case \"BorderStyle\":\n          borderStyle = parseInt(value, 10);\n          break;\n        case \"BackColour\":\n          bgColor = parseColor(value);\n          break;\n        case \"OutlineColour\":\n          const _outlineColor = parseColor(value);\n          if (_outlineColor)\n            outlineColor = _outlineColor;\n          break;\n        case \"Bold\":\n          if (parseInt(value))\n            styles[\"font-weight\"] = \"bold\";\n          break;\n        case \"Italic\":\n          if (parseInt(value))\n            styles[\"font-style\"] = \"italic\";\n          break;\n        case \"Underline\":\n          if (parseInt(value))\n            styles[\"text-decoration\"] = \"underline\";\n          break;\n        case \"StrikeOut\":\n          if (parseInt(value))\n            styles[\"text-decoration\"] = \"line-through\";\n          break;\n        case \"Spacing\":\n          styles[\"letter-spacing\"] = value + \"px\";\n          break;\n        case \"AlphaLevel\":\n          styles[\"opacity\"] = parseFloat(value);\n          break;\n        case \"ScaleX\":\n          transform.push(`scaleX(${parseFloat(value) / 100})`);\n          break;\n        case \"ScaleY\":\n          transform.push(`scaleY(${parseFloat(value) / 100})`);\n          break;\n        case \"Angle\":\n          transform.push(`rotate(${value}deg)`);\n          break;\n        case \"Shadow\":\n          outlineY = parseInt(value, 10) * 1.2;\n          break;\n        case \"MarginL\":\n          styles[\"--cue-width\"] = \"auto\";\n          styles[\"--cue-left\"] = parseFloat(value) + \"px\";\n          break;\n        case \"MarginR\":\n          styles[\"--cue-width\"] = \"auto\";\n          styles[\"--cue-right\"] = parseFloat(value) + \"px\";\n          break;\n        case \"MarginV\":\n          marginV = parseFloat(value);\n          break;\n        case \"Outline\":\n          outlineX = parseInt(value, 10);\n          break;\n        case \"Alignment\":\n          const alignment = parseInt(value, 10);\n          if (alignment >= 4)\n            vertical = alignment >= 7 ? \"top\" : \"center\";\n          switch (alignment % 3) {\n            case 1:\n              align = \"start\";\n              break;\n            case 2:\n              align = \"center\";\n              break;\n            case 3:\n              align = \"end\";\n              break;\n          }\n      }\n    }\n    styles._vertical = vertical;\n    styles[\"--cue-white-space\"] = \"normal\";\n    styles[\"--cue-line-height\"] = \"normal\";\n    styles[\"--cue-text-align\"] = align;\n    if (vertical === \"center\") {\n      styles[`--cue-top`] = \"50%\";\n      transform.push(\"translateY(-50%)\");\n    } else {\n      styles[`--cue-${vertical}`] = (marginV || 0) + \"px\";\n    }\n    if (borderStyle === 1) {\n      styles[\"--cue-padding-y\"] = \"0\";\n    }\n    if (borderStyle === 1 || bgColor) {\n      styles[\"--cue-bg-color\"] = borderStyle === 1 ? \"none\" : bgColor;\n    }\n    if (borderStyle === 3 && outlineColor) {\n      styles[\"--cue-outline\"] = `${outlineX}px solid ${outlineColor}`;\n    }\n    if (borderStyle === 1 && typeof outlineX === \"number\") {\n      const color = bgColor ?? \"#000\";\n      styles[\"--cue-text-shadow\"] = [\n        outlineColor && buildTextShadow(outlineX * 1.2, outlineY * 1.2, outlineColor),\n        outlineColor ? buildTextShadow(outlineX * (outlineX / 2), outlineY * (outlineX / 2), color) : buildTextShadow(outlineX, outlineY, color)\n      ].filter(Boolean).join(\", \");\n    }\n    if (transform.length)\n      styles[\"--cue-transform\"] = transform.join(\" \");\n    this._styles[name] = styles;\n  }\n  _parseDialogue(values, lineCount) {\n    const fields = this._buildFields(values);\n    const timestamp = this._parseTimestamp(fields.Start, fields.End, lineCount);\n    if (!timestamp)\n      return;\n    const cue = new _index_js__WEBPACK_IMPORTED_MODULE_0__.b(timestamp[0], timestamp[1], \"\"), styles = { ...this._styles[fields.Style] || {} }, voice = fields.Name ? `<v ${fields.Name}>` : \"\";\n    const vertical = styles._vertical, marginLeft = fields.MarginL && parseFloat(fields.MarginL), marginRight = fields.MarginR && parseFloat(fields.MarginR), marginV = fields.MarginV && parseFloat(fields.MarginV);\n    if (marginLeft) {\n      styles[\"--cue-width\"] = \"auto\";\n      styles[\"--cue-left\"] = marginLeft + \"px\";\n    }\n    if (marginRight) {\n      styles[\"--cue-width\"] = \"auto\";\n      styles[\"--cue-right\"] = marginRight + \"px\";\n    }\n    if (marginV && vertical !== \"center\") {\n      styles[`--cue-${vertical}`] = marginV + \"px\";\n    }\n    cue.text = voice + values.slice(this._format.length - 1).join(\", \").replace(STYLE_FUNCTION_RE, \"\").replace(NEW_LINE_RE, \"\\n\");\n    delete styles._vertical;\n    if (Object.keys(styles).length)\n      cue.style = styles;\n    return cue;\n  }\n  _buildFields(values) {\n    const fields = {};\n    for (let i = 0; i < this._format.length; i++) {\n      fields[this._format[i]] = values[i];\n    }\n    return fields;\n  }\n  _parseTimestamp(startTimeText, endTimeText, lineCount) {\n    const startTime = (0,_index_js__WEBPACK_IMPORTED_MODULE_0__.p)(startTimeText), endTime = (0,_index_js__WEBPACK_IMPORTED_MODULE_0__.p)(endTimeText);\n    if (startTime !== null && endTime !== null && endTime > startTime) {\n      return [startTime, endTime];\n    } else {\n      if (startTime === null) {\n        this._handleError(this._errorBuilder?._badStartTimestamp(startTimeText, lineCount));\n      }\n      if (endTime === null) {\n        this._handleError(this._errorBuilder?._badEndTimestamp(endTimeText, lineCount));\n      }\n      if (startTime != null && endTime !== null && endTime > startTime) {\n        this._handleError(this._errorBuilder?._badRangeTimestamp(startTime, endTime, lineCount));\n      }\n    }\n  }\n  _handleError(error) {\n    if (!error)\n      return;\n    this._errors.push(error);\n    if (this._init.strict) {\n      this._init.cancel();\n      throw error;\n    } else {\n      this._init.onError?.(error);\n    }\n  }\n}\nfunction parseColor(color) {\n  const abgr = parseInt(color.replace(\"&H\", \"\"), 16);\n  if (abgr >= 0) {\n    const a = abgr >> 24 & 255 ^ 255;\n    const alpha = a / 255;\n    const b = abgr >> 16 & 255;\n    const g = abgr >> 8 & 255;\n    const r = abgr & 255;\n    return \"rgba(\" + [r, g, b, alpha].join(\",\") + \")\";\n  }\n  return null;\n}\nfunction buildTextShadow(x, y, color) {\n  const noOfShadows = Math.ceil(2 * Math.PI * x);\n  let textShadow = \"\";\n  for (let i = 0; i < noOfShadows; i++) {\n    const theta = 2 * Math.PI * i / noOfShadows;\n    textShadow += x * Math.cos(theta) + \"px \" + y * Math.sin(theta) + \"px 0 \" + color + (i == noOfShadows - 1 ? \"\" : \",\");\n  }\n  return textShadow;\n}\nfunction createSSAParser() {\n  return new SSAParser();\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9tZWRpYS1jYXB0aW9ucy9kaXN0L2Rldi9zc2EtcGFyc2VyLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFpRTs7QUFFakUsbUxBQW1MLEdBQUcsSUFBSTtBQUMxTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MseVBBQXFCO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBLFlBQVk7QUFDWjtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBLE1BQU0sd0JBQXdCO0FBQzlCO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDLG9CQUFvQix5QkFBeUI7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLE9BQU87QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsd0JBQXdCO0FBQzNEO0FBQ0E7QUFDQSxtQ0FBbUMsd0JBQXdCO0FBQzNEO0FBQ0E7QUFDQSxtQ0FBbUMsTUFBTTtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sc0JBQXNCLFNBQVM7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxTQUFTLFdBQVcsYUFBYTtBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHdDQUFNLDZDQUE2QyxxQ0FBcUMsOEJBQThCLFlBQVk7QUFDdEo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsU0FBUztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IseUJBQXlCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsNENBQWlCLDJCQUEyQiw0Q0FBaUI7QUFDbkY7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsaUJBQWlCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRWlEIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGxvcmRyXFxEb3dubG9hZHNcXEFuaVRlYW1zLW1haW5cXG5vZGVfbW9kdWxlc1xcbWVkaWEtY2FwdGlvbnNcXGRpc3RcXGRldlxcc3NhLXBhcnNlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBiIGFzIFZUVEN1ZSwgcCBhcyBwYXJzZVZUVFRpbWVzdGFtcCB9IGZyb20gJy4vaW5kZXguanMnO1xuXG5jb25zdCBGT1JNQVRfU1RBUlRfUkUgPSAvXkZvcm1hdDpbXFxzXFx0XSovLCBTVFlMRV9TVEFSVF9SRSA9IC9eU3R5bGU6W1xcc1xcdF0qLywgRElBTE9HVUVfU1RBUlRfUkUgPSAvXkRpYWxvZ3VlOltcXHNcXHRdKi8sIEZPUk1BVF9TUExJVF9SRSA9IC9bXFxzXFx0XSosW1xcc1xcdF0qLywgU1RZTEVfRlVOQ1RJT05fUkUgPSAvXFx7W159XStcXH0vZywgTkVXX0xJTkVfUkUgPSAvXFxcXE4vZywgU1RZTEVTX1NFQ1RJT05fU1RBUlRfUkUgPSAvXlxcWyguKilbXFxzXFx0XT9TdHlsZXNcXF0kLywgRVZFTlRTX1NFQ1RJT05fU1RBUlRfUkUgPSAvXlxcWyguKilbXFxzXFx0XT9FdmVudHNcXF0kLztcbmNsYXNzIFNTQVBhcnNlciB7XG4gIF9pbml0O1xuICBfc2VjdGlvbiA9IDAgLyogTm9uZSAqLztcbiAgX2N1ZSA9IG51bGw7XG4gIF9jdWVzID0gW107XG4gIF9lcnJvcnMgPSBbXTtcbiAgX2Zvcm1hdCA9IG51bGw7XG4gIF9lcnJvckJ1aWxkZXI7XG4gIF9zdHlsZXMgPSB7fTtcbiAgYXN5bmMgaW5pdChpbml0KSB7XG4gICAgdGhpcy5faW5pdCA9IGluaXQ7XG4gICAgaWYgKGluaXQuZXJyb3JzKVxuICAgICAgdGhpcy5fZXJyb3JCdWlsZGVyID0gKGF3YWl0IGltcG9ydCgnLi9lcnJvcnMuanMnKSkuUGFyc2VFcnJvckJ1aWxkZXI7XG4gIH1cbiAgcGFyc2UobGluZSwgbGluZUNvdW50KSB7XG4gICAgaWYgKHRoaXMuX3NlY3Rpb24pIHtcbiAgICAgIHN3aXRjaCAodGhpcy5fc2VjdGlvbikge1xuICAgICAgICBjYXNlIDEgLyogU3R5bGUgKi86XG4gICAgICAgICAgaWYgKGxpbmUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgIHRoaXMuX3NlY3Rpb24gPSAwIC8qIE5vbmUgKi87XG4gICAgICAgICAgfSBlbHNlIGlmIChTVFlMRV9TVEFSVF9SRS50ZXN0KGxpbmUpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fZm9ybWF0KSB7XG4gICAgICAgICAgICAgIGNvbnN0IHN0eWxlcyA9IGxpbmUucmVwbGFjZShTVFlMRV9TVEFSVF9SRSwgXCJcIikuc3BsaXQoRk9STUFUX1NQTElUX1JFKTtcbiAgICAgICAgICAgICAgdGhpcy5fcGFyc2VTdHlsZXMoc3R5bGVzKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMuX2hhbmRsZUVycm9yKHRoaXMuX2Vycm9yQnVpbGRlcj8uX21pc3NpbmdGb3JtYXQoXCJTdHlsZVwiLCBsaW5lQ291bnQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKEZPUk1BVF9TVEFSVF9SRS50ZXN0KGxpbmUpKSB7XG4gICAgICAgICAgICB0aGlzLl9mb3JtYXQgPSBsaW5lLnJlcGxhY2UoRk9STUFUX1NUQVJUX1JFLCBcIlwiKS5zcGxpdChGT1JNQVRfU1BMSVRfUkUpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoRVZFTlRTX1NFQ1RJT05fU1RBUlRfUkUudGVzdChsaW5lKSkge1xuICAgICAgICAgICAgdGhpcy5fZm9ybWF0ID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuX3NlY3Rpb24gPSAyIC8qIEV2ZW50ICovO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyIC8qIEV2ZW50ICovOlxuICAgICAgICAgIGlmIChsaW5lID09PSBcIlwiKSB7XG4gICAgICAgICAgICB0aGlzLl9jb21taXRDdWUoKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKERJQUxPR1VFX1NUQVJUX1JFLnRlc3QobGluZSkpIHtcbiAgICAgICAgICAgIHRoaXMuX2NvbW1pdEN1ZSgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuX2Zvcm1hdCkge1xuICAgICAgICAgICAgICBjb25zdCBkaWFsb2d1ZSA9IGxpbmUucmVwbGFjZShESUFMT0dVRV9TVEFSVF9SRSwgXCJcIikuc3BsaXQoRk9STUFUX1NQTElUX1JFKSwgY3VlID0gdGhpcy5fcGFyc2VEaWFsb2d1ZShkaWFsb2d1ZSwgbGluZUNvdW50KTtcbiAgICAgICAgICAgICAgaWYgKGN1ZSlcbiAgICAgICAgICAgICAgICB0aGlzLl9jdWUgPSBjdWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLl9oYW5kbGVFcnJvcih0aGlzLl9lcnJvckJ1aWxkZXI/Ll9taXNzaW5nRm9ybWF0KFwiRGlhbG9ndWVcIiwgbGluZUNvdW50KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9jdWUpIHtcbiAgICAgICAgICAgIHRoaXMuX2N1ZS50ZXh0ICs9IFwiXFxuXCIgKyBsaW5lLnJlcGxhY2UoU1RZTEVfRlVOQ1RJT05fUkUsIFwiXCIpLnJlcGxhY2UoTkVXX0xJTkVfUkUsIFwiXFxuXCIpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoRk9STUFUX1NUQVJUX1JFLnRlc3QobGluZSkpIHtcbiAgICAgICAgICAgIHRoaXMuX2Zvcm1hdCA9IGxpbmUucmVwbGFjZShGT1JNQVRfU1RBUlRfUkUsIFwiXCIpLnNwbGl0KEZPUk1BVF9TUExJVF9SRSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChTVFlMRVNfU0VDVElPTl9TVEFSVF9SRS50ZXN0KGxpbmUpKSB7XG4gICAgICAgICAgICB0aGlzLl9mb3JtYXQgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5fc2VjdGlvbiA9IDEgLyogU3R5bGUgKi87XG4gICAgICAgICAgfSBlbHNlIGlmIChFVkVOVFNfU0VDVElPTl9TVEFSVF9SRS50ZXN0KGxpbmUpKSB7XG4gICAgICAgICAgICB0aGlzLl9mb3JtYXQgPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGxpbmUgPT09IFwiXCIpIDsgZWxzZSBpZiAoU1RZTEVTX1NFQ1RJT05fU1RBUlRfUkUudGVzdChsaW5lKSkge1xuICAgICAgdGhpcy5fZm9ybWF0ID0gbnVsbDtcbiAgICAgIHRoaXMuX3NlY3Rpb24gPSAxIC8qIFN0eWxlICovO1xuICAgIH0gZWxzZSBpZiAoRVZFTlRTX1NFQ1RJT05fU1RBUlRfUkUudGVzdChsaW5lKSkge1xuICAgICAgdGhpcy5fZm9ybWF0ID0gbnVsbDtcbiAgICAgIHRoaXMuX3NlY3Rpb24gPSAyIC8qIEV2ZW50ICovO1xuICAgIH1cbiAgfVxuICBkb25lKCkge1xuICAgIHJldHVybiB7XG4gICAgICBtZXRhZGF0YToge30sXG4gICAgICBjdWVzOiB0aGlzLl9jdWVzLFxuICAgICAgcmVnaW9uczogW10sXG4gICAgICBlcnJvcnM6IHRoaXMuX2Vycm9yc1xuICAgIH07XG4gIH1cbiAgX2NvbW1pdEN1ZSgpIHtcbiAgICBpZiAoIXRoaXMuX2N1ZSlcbiAgICAgIHJldHVybjtcbiAgICB0aGlzLl9jdWVzLnB1c2godGhpcy5fY3VlKTtcbiAgICB0aGlzLl9pbml0Lm9uQ3VlPy4odGhpcy5fY3VlKTtcbiAgICB0aGlzLl9jdWUgPSBudWxsO1xuICB9XG4gIF9wYXJzZVN0eWxlcyh2YWx1ZXMpIHtcbiAgICBsZXQgbmFtZSA9IFwiRGVmYXVsdFwiLCBzdHlsZXMgPSB7fSwgb3V0bGluZVgsIGFsaWduID0gXCJjZW50ZXJcIiwgdmVydGljYWwgPSBcImJvdHRvbVwiLCBtYXJnaW5WLCBvdXRsaW5lWSA9IDEuMiwgb3V0bGluZUNvbG9yLCBiZ0NvbG9yLCBib3JkZXJTdHlsZSA9IDMsIHRyYW5zZm9ybSA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fZm9ybWF0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBmaWVsZCA9IHRoaXMuX2Zvcm1hdFtpXSwgdmFsdWUgPSB2YWx1ZXNbaV07XG4gICAgICBzd2l0Y2ggKGZpZWxkKSB7XG4gICAgICAgIGNhc2UgXCJOYW1lXCI6XG4gICAgICAgICAgbmFtZSA9IHZhbHVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiRm9udG5hbWVcIjpcbiAgICAgICAgICBzdHlsZXNbXCJmb250LWZhbWlseVwiXSA9IHZhbHVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiRm9udHNpemVcIjpcbiAgICAgICAgICBzdHlsZXNbXCJmb250LXNpemVcIl0gPSBgY2FsYygke3ZhbHVlfSAvIHZhcigtLW92ZXJsYXktaGVpZ2h0KSlgO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiUHJpbWFyeUNvbG91clwiOlxuICAgICAgICAgIGNvbnN0IGNvbG9yID0gcGFyc2VDb2xvcih2YWx1ZSk7XG4gICAgICAgICAgaWYgKGNvbG9yKVxuICAgICAgICAgICAgc3R5bGVzW1wiLS1jdWUtY29sb3JcIl0gPSBjb2xvcjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIkJvcmRlclN0eWxlXCI6XG4gICAgICAgICAgYm9yZGVyU3R5bGUgPSBwYXJzZUludCh2YWx1ZSwgMTApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiQmFja0NvbG91clwiOlxuICAgICAgICAgIGJnQ29sb3IgPSBwYXJzZUNvbG9yKHZhbHVlKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIk91dGxpbmVDb2xvdXJcIjpcbiAgICAgICAgICBjb25zdCBfb3V0bGluZUNvbG9yID0gcGFyc2VDb2xvcih2YWx1ZSk7XG4gICAgICAgICAgaWYgKF9vdXRsaW5lQ29sb3IpXG4gICAgICAgICAgICBvdXRsaW5lQ29sb3IgPSBfb3V0bGluZUNvbG9yO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiQm9sZFwiOlxuICAgICAgICAgIGlmIChwYXJzZUludCh2YWx1ZSkpXG4gICAgICAgICAgICBzdHlsZXNbXCJmb250LXdlaWdodFwiXSA9IFwiYm9sZFwiO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiSXRhbGljXCI6XG4gICAgICAgICAgaWYgKHBhcnNlSW50KHZhbHVlKSlcbiAgICAgICAgICAgIHN0eWxlc1tcImZvbnQtc3R5bGVcIl0gPSBcIml0YWxpY1wiO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiVW5kZXJsaW5lXCI6XG4gICAgICAgICAgaWYgKHBhcnNlSW50KHZhbHVlKSlcbiAgICAgICAgICAgIHN0eWxlc1tcInRleHQtZGVjb3JhdGlvblwiXSA9IFwidW5kZXJsaW5lXCI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJTdHJpa2VPdXRcIjpcbiAgICAgICAgICBpZiAocGFyc2VJbnQodmFsdWUpKVxuICAgICAgICAgICAgc3R5bGVzW1widGV4dC1kZWNvcmF0aW9uXCJdID0gXCJsaW5lLXRocm91Z2hcIjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIlNwYWNpbmdcIjpcbiAgICAgICAgICBzdHlsZXNbXCJsZXR0ZXItc3BhY2luZ1wiXSA9IHZhbHVlICsgXCJweFwiO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiQWxwaGFMZXZlbFwiOlxuICAgICAgICAgIHN0eWxlc1tcIm9wYWNpdHlcIl0gPSBwYXJzZUZsb2F0KHZhbHVlKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIlNjYWxlWFwiOlxuICAgICAgICAgIHRyYW5zZm9ybS5wdXNoKGBzY2FsZVgoJHtwYXJzZUZsb2F0KHZhbHVlKSAvIDEwMH0pYCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJTY2FsZVlcIjpcbiAgICAgICAgICB0cmFuc2Zvcm0ucHVzaChgc2NhbGVZKCR7cGFyc2VGbG9hdCh2YWx1ZSkgLyAxMDB9KWApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiQW5nbGVcIjpcbiAgICAgICAgICB0cmFuc2Zvcm0ucHVzaChgcm90YXRlKCR7dmFsdWV9ZGVnKWApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiU2hhZG93XCI6XG4gICAgICAgICAgb3V0bGluZVkgPSBwYXJzZUludCh2YWx1ZSwgMTApICogMS4yO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiTWFyZ2luTFwiOlxuICAgICAgICAgIHN0eWxlc1tcIi0tY3VlLXdpZHRoXCJdID0gXCJhdXRvXCI7XG4gICAgICAgICAgc3R5bGVzW1wiLS1jdWUtbGVmdFwiXSA9IHBhcnNlRmxvYXQodmFsdWUpICsgXCJweFwiO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiTWFyZ2luUlwiOlxuICAgICAgICAgIHN0eWxlc1tcIi0tY3VlLXdpZHRoXCJdID0gXCJhdXRvXCI7XG4gICAgICAgICAgc3R5bGVzW1wiLS1jdWUtcmlnaHRcIl0gPSBwYXJzZUZsb2F0KHZhbHVlKSArIFwicHhcIjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIk1hcmdpblZcIjpcbiAgICAgICAgICBtYXJnaW5WID0gcGFyc2VGbG9hdCh2YWx1ZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJPdXRsaW5lXCI6XG4gICAgICAgICAgb3V0bGluZVggPSBwYXJzZUludCh2YWx1ZSwgMTApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiQWxpZ25tZW50XCI6XG4gICAgICAgICAgY29uc3QgYWxpZ25tZW50ID0gcGFyc2VJbnQodmFsdWUsIDEwKTtcbiAgICAgICAgICBpZiAoYWxpZ25tZW50ID49IDQpXG4gICAgICAgICAgICB2ZXJ0aWNhbCA9IGFsaWdubWVudCA+PSA3ID8gXCJ0b3BcIiA6IFwiY2VudGVyXCI7XG4gICAgICAgICAgc3dpdGNoIChhbGlnbm1lbnQgJSAzKSB7XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgIGFsaWduID0gXCJzdGFydFwiO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgYWxpZ24gPSBcImNlbnRlclwiO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgYWxpZ24gPSBcImVuZFwiO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHN0eWxlcy5fdmVydGljYWwgPSB2ZXJ0aWNhbDtcbiAgICBzdHlsZXNbXCItLWN1ZS13aGl0ZS1zcGFjZVwiXSA9IFwibm9ybWFsXCI7XG4gICAgc3R5bGVzW1wiLS1jdWUtbGluZS1oZWlnaHRcIl0gPSBcIm5vcm1hbFwiO1xuICAgIHN0eWxlc1tcIi0tY3VlLXRleHQtYWxpZ25cIl0gPSBhbGlnbjtcbiAgICBpZiAodmVydGljYWwgPT09IFwiY2VudGVyXCIpIHtcbiAgICAgIHN0eWxlc1tgLS1jdWUtdG9wYF0gPSBcIjUwJVwiO1xuICAgICAgdHJhbnNmb3JtLnB1c2goXCJ0cmFuc2xhdGVZKC01MCUpXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZXNbYC0tY3VlLSR7dmVydGljYWx9YF0gPSAobWFyZ2luViB8fCAwKSArIFwicHhcIjtcbiAgICB9XG4gICAgaWYgKGJvcmRlclN0eWxlID09PSAxKSB7XG4gICAgICBzdHlsZXNbXCItLWN1ZS1wYWRkaW5nLXlcIl0gPSBcIjBcIjtcbiAgICB9XG4gICAgaWYgKGJvcmRlclN0eWxlID09PSAxIHx8IGJnQ29sb3IpIHtcbiAgICAgIHN0eWxlc1tcIi0tY3VlLWJnLWNvbG9yXCJdID0gYm9yZGVyU3R5bGUgPT09IDEgPyBcIm5vbmVcIiA6IGJnQ29sb3I7XG4gICAgfVxuICAgIGlmIChib3JkZXJTdHlsZSA9PT0gMyAmJiBvdXRsaW5lQ29sb3IpIHtcbiAgICAgIHN0eWxlc1tcIi0tY3VlLW91dGxpbmVcIl0gPSBgJHtvdXRsaW5lWH1weCBzb2xpZCAke291dGxpbmVDb2xvcn1gO1xuICAgIH1cbiAgICBpZiAoYm9yZGVyU3R5bGUgPT09IDEgJiYgdHlwZW9mIG91dGxpbmVYID09PSBcIm51bWJlclwiKSB7XG4gICAgICBjb25zdCBjb2xvciA9IGJnQ29sb3IgPz8gXCIjMDAwXCI7XG4gICAgICBzdHlsZXNbXCItLWN1ZS10ZXh0LXNoYWRvd1wiXSA9IFtcbiAgICAgICAgb3V0bGluZUNvbG9yICYmIGJ1aWxkVGV4dFNoYWRvdyhvdXRsaW5lWCAqIDEuMiwgb3V0bGluZVkgKiAxLjIsIG91dGxpbmVDb2xvciksXG4gICAgICAgIG91dGxpbmVDb2xvciA/IGJ1aWxkVGV4dFNoYWRvdyhvdXRsaW5lWCAqIChvdXRsaW5lWCAvIDIpLCBvdXRsaW5lWSAqIChvdXRsaW5lWCAvIDIpLCBjb2xvcikgOiBidWlsZFRleHRTaGFkb3cob3V0bGluZVgsIG91dGxpbmVZLCBjb2xvcilcbiAgICAgIF0uZmlsdGVyKEJvb2xlYW4pLmpvaW4oXCIsIFwiKTtcbiAgICB9XG4gICAgaWYgKHRyYW5zZm9ybS5sZW5ndGgpXG4gICAgICBzdHlsZXNbXCItLWN1ZS10cmFuc2Zvcm1cIl0gPSB0cmFuc2Zvcm0uam9pbihcIiBcIik7XG4gICAgdGhpcy5fc3R5bGVzW25hbWVdID0gc3R5bGVzO1xuICB9XG4gIF9wYXJzZURpYWxvZ3VlKHZhbHVlcywgbGluZUNvdW50KSB7XG4gICAgY29uc3QgZmllbGRzID0gdGhpcy5fYnVpbGRGaWVsZHModmFsdWVzKTtcbiAgICBjb25zdCB0aW1lc3RhbXAgPSB0aGlzLl9wYXJzZVRpbWVzdGFtcChmaWVsZHMuU3RhcnQsIGZpZWxkcy5FbmQsIGxpbmVDb3VudCk7XG4gICAgaWYgKCF0aW1lc3RhbXApXG4gICAgICByZXR1cm47XG4gICAgY29uc3QgY3VlID0gbmV3IFZUVEN1ZSh0aW1lc3RhbXBbMF0sIHRpbWVzdGFtcFsxXSwgXCJcIiksIHN0eWxlcyA9IHsgLi4udGhpcy5fc3R5bGVzW2ZpZWxkcy5TdHlsZV0gfHwge30gfSwgdm9pY2UgPSBmaWVsZHMuTmFtZSA/IGA8diAke2ZpZWxkcy5OYW1lfT5gIDogXCJcIjtcbiAgICBjb25zdCB2ZXJ0aWNhbCA9IHN0eWxlcy5fdmVydGljYWwsIG1hcmdpbkxlZnQgPSBmaWVsZHMuTWFyZ2luTCAmJiBwYXJzZUZsb2F0KGZpZWxkcy5NYXJnaW5MKSwgbWFyZ2luUmlnaHQgPSBmaWVsZHMuTWFyZ2luUiAmJiBwYXJzZUZsb2F0KGZpZWxkcy5NYXJnaW5SKSwgbWFyZ2luViA9IGZpZWxkcy5NYXJnaW5WICYmIHBhcnNlRmxvYXQoZmllbGRzLk1hcmdpblYpO1xuICAgIGlmIChtYXJnaW5MZWZ0KSB7XG4gICAgICBzdHlsZXNbXCItLWN1ZS13aWR0aFwiXSA9IFwiYXV0b1wiO1xuICAgICAgc3R5bGVzW1wiLS1jdWUtbGVmdFwiXSA9IG1hcmdpbkxlZnQgKyBcInB4XCI7XG4gICAgfVxuICAgIGlmIChtYXJnaW5SaWdodCkge1xuICAgICAgc3R5bGVzW1wiLS1jdWUtd2lkdGhcIl0gPSBcImF1dG9cIjtcbiAgICAgIHN0eWxlc1tcIi0tY3VlLXJpZ2h0XCJdID0gbWFyZ2luUmlnaHQgKyBcInB4XCI7XG4gICAgfVxuICAgIGlmIChtYXJnaW5WICYmIHZlcnRpY2FsICE9PSBcImNlbnRlclwiKSB7XG4gICAgICBzdHlsZXNbYC0tY3VlLSR7dmVydGljYWx9YF0gPSBtYXJnaW5WICsgXCJweFwiO1xuICAgIH1cbiAgICBjdWUudGV4dCA9IHZvaWNlICsgdmFsdWVzLnNsaWNlKHRoaXMuX2Zvcm1hdC5sZW5ndGggLSAxKS5qb2luKFwiLCBcIikucmVwbGFjZShTVFlMRV9GVU5DVElPTl9SRSwgXCJcIikucmVwbGFjZShORVdfTElORV9SRSwgXCJcXG5cIik7XG4gICAgZGVsZXRlIHN0eWxlcy5fdmVydGljYWw7XG4gICAgaWYgKE9iamVjdC5rZXlzKHN0eWxlcykubGVuZ3RoKVxuICAgICAgY3VlLnN0eWxlID0gc3R5bGVzO1xuICAgIHJldHVybiBjdWU7XG4gIH1cbiAgX2J1aWxkRmllbGRzKHZhbHVlcykge1xuICAgIGNvbnN0IGZpZWxkcyA9IHt9O1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fZm9ybWF0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBmaWVsZHNbdGhpcy5fZm9ybWF0W2ldXSA9IHZhbHVlc1tpXTtcbiAgICB9XG4gICAgcmV0dXJuIGZpZWxkcztcbiAgfVxuICBfcGFyc2VUaW1lc3RhbXAoc3RhcnRUaW1lVGV4dCwgZW5kVGltZVRleHQsIGxpbmVDb3VudCkge1xuICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBhcnNlVlRUVGltZXN0YW1wKHN0YXJ0VGltZVRleHQpLCBlbmRUaW1lID0gcGFyc2VWVFRUaW1lc3RhbXAoZW5kVGltZVRleHQpO1xuICAgIGlmIChzdGFydFRpbWUgIT09IG51bGwgJiYgZW5kVGltZSAhPT0gbnVsbCAmJiBlbmRUaW1lID4gc3RhcnRUaW1lKSB7XG4gICAgICByZXR1cm4gW3N0YXJ0VGltZSwgZW5kVGltZV07XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChzdGFydFRpbWUgPT09IG51bGwpIHtcbiAgICAgICAgdGhpcy5faGFuZGxlRXJyb3IodGhpcy5fZXJyb3JCdWlsZGVyPy5fYmFkU3RhcnRUaW1lc3RhbXAoc3RhcnRUaW1lVGV4dCwgbGluZUNvdW50KSk7XG4gICAgICB9XG4gICAgICBpZiAoZW5kVGltZSA9PT0gbnVsbCkge1xuICAgICAgICB0aGlzLl9oYW5kbGVFcnJvcih0aGlzLl9lcnJvckJ1aWxkZXI/Ll9iYWRFbmRUaW1lc3RhbXAoZW5kVGltZVRleHQsIGxpbmVDb3VudCkpO1xuICAgICAgfVxuICAgICAgaWYgKHN0YXJ0VGltZSAhPSBudWxsICYmIGVuZFRpbWUgIT09IG51bGwgJiYgZW5kVGltZSA+IHN0YXJ0VGltZSkge1xuICAgICAgICB0aGlzLl9oYW5kbGVFcnJvcih0aGlzLl9lcnJvckJ1aWxkZXI/Ll9iYWRSYW5nZVRpbWVzdGFtcChzdGFydFRpbWUsIGVuZFRpbWUsIGxpbmVDb3VudCkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBfaGFuZGxlRXJyb3IoZXJyb3IpIHtcbiAgICBpZiAoIWVycm9yKVxuICAgICAgcmV0dXJuO1xuICAgIHRoaXMuX2Vycm9ycy5wdXNoKGVycm9yKTtcbiAgICBpZiAodGhpcy5faW5pdC5zdHJpY3QpIHtcbiAgICAgIHRoaXMuX2luaXQuY2FuY2VsKCk7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faW5pdC5vbkVycm9yPy4oZXJyb3IpO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gcGFyc2VDb2xvcihjb2xvcikge1xuICBjb25zdCBhYmdyID0gcGFyc2VJbnQoY29sb3IucmVwbGFjZShcIiZIXCIsIFwiXCIpLCAxNik7XG4gIGlmIChhYmdyID49IDApIHtcbiAgICBjb25zdCBhID0gYWJnciA+PiAyNCAmIDI1NSBeIDI1NTtcbiAgICBjb25zdCBhbHBoYSA9IGEgLyAyNTU7XG4gICAgY29uc3QgYiA9IGFiZ3IgPj4gMTYgJiAyNTU7XG4gICAgY29uc3QgZyA9IGFiZ3IgPj4gOCAmIDI1NTtcbiAgICBjb25zdCByID0gYWJnciAmIDI1NTtcbiAgICByZXR1cm4gXCJyZ2JhKFwiICsgW3IsIGcsIGIsIGFscGhhXS5qb2luKFwiLFwiKSArIFwiKVwiO1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gYnVpbGRUZXh0U2hhZG93KHgsIHksIGNvbG9yKSB7XG4gIGNvbnN0IG5vT2ZTaGFkb3dzID0gTWF0aC5jZWlsKDIgKiBNYXRoLlBJICogeCk7XG4gIGxldCB0ZXh0U2hhZG93ID0gXCJcIjtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBub09mU2hhZG93czsgaSsrKSB7XG4gICAgY29uc3QgdGhldGEgPSAyICogTWF0aC5QSSAqIGkgLyBub09mU2hhZG93cztcbiAgICB0ZXh0U2hhZG93ICs9IHggKiBNYXRoLmNvcyh0aGV0YSkgKyBcInB4IFwiICsgeSAqIE1hdGguc2luKHRoZXRhKSArIFwicHggMCBcIiArIGNvbG9yICsgKGkgPT0gbm9PZlNoYWRvd3MgLSAxID8gXCJcIiA6IFwiLFwiKTtcbiAgfVxuICByZXR1cm4gdGV4dFNoYWRvdztcbn1cbmZ1bmN0aW9uIGNyZWF0ZVNTQVBhcnNlcigpIHtcbiAgcmV0dXJuIG5ldyBTU0FQYXJzZXIoKTtcbn1cblxuZXhwb3J0IHsgU1NBUGFyc2VyLCBjcmVhdGVTU0FQYXJzZXIgYXMgZGVmYXVsdCB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/media-captions/dist/dev/ssa-parser.js\n"));

/***/ })

}]);